/* =============================================
   Modern Linear‑style Color Tokens (OKLCH)
   ---------------------------------------------
   • One "seed" brand color + contrast tune
   • All other values are algorithmically derived
   • Works in every evergreen browser (2023+)
   • Improved hover states & accessibility
   ============================================= */

/* ──────────────────────────
   1. Primitive palette seeds
   ──────────────────────────*/
   :root {
  /* Brand (accent) hue, chroma & lightness */
  --seed: oklch(60% 0.20 254);          /* Linear blue */

  /* Control global contrast – tweak from 0.04 ↔ 0.12 */
  --contrast-step: 0.08;
  
  /* Hover lightness adjustments for better readability */
  --hover-lightness-shift: 0.08;       /* 8% lighter/darker on hover */
  --active-lightness-shift: 0.12;      /* 12% for active states */

  /* ───────── Accent scale (derived) ───────── */
  --accent-50:  oklch(from var(--seed) calc(l + 0.38) calc(c * 0.1) h);
  --accent-100: oklch(from var(--seed) calc(l + 0.32) calc(c * 0.2) h);
  --accent-200: oklch(from var(--seed) calc(l + 0.26) calc(c * 0.3) h);
  --accent-300: oklch(from var(--seed) calc(l + 0.18) calc(c * 0.5) h);
  --accent-400: oklch(from var(--seed) calc(l + 0.10) calc(c * 0.7) h);
  --accent-500: var(--seed);
  --accent-600: oklch(from var(--seed) calc(l - 0.10) calc(c * 1.1) h);
  --accent-700: oklch(from var(--seed) calc(l - 0.18) calc(c * 1.0) h);
  --accent-800: oklch(from var(--seed) calc(l - 0.28) calc(c * 0.8) h);
  --accent-900: oklch(from var(--seed) calc(l - 0.38) calc(c * 0.6) h);

  /* ───────── Neutral scale (fixed hue, 0 chroma) ───────── */
  --neutral-50:  oklch(98% 0.005 254);  /* Subtle brand tint */
  --neutral-100: oklch(96% 0.004 254);
  --neutral-200: oklch(93% 0.003 254);
  --neutral-300: oklch(88% 0.002 254);
  --neutral-400: oklch(75% 0.001 254);
  --neutral-500: oklch(60% 0 0);
  --neutral-600: oklch(45% 0 0);
  --neutral-700: oklch(30% 0 0);
  --neutral-800: oklch(20% 0 0);
  --neutral-900: oklch(12% 0 0);

  /* ────────────────────────────
     2. Semantic → Component map
     ────────────────────────────*/
  /* Surfaces */
  --color-background:          var(--neutral-50);
  --color-surface-primary:     var(--neutral-50);
  --color-surface-secondary:   var(--neutral-100);
  --color-surface-hover:       oklch(from var(--color-surface-primary) calc(l - var(--hover-lightness-shift)) c h);
  --color-surface-active:      oklch(from var(--color-surface-primary) calc(l - var(--active-lightness-shift)) c h);
  --color-border:              var(--neutral-200);
  --color-border-hover:        oklch(from var(--color-border) calc(l - var(--hover-lightness-shift)) c h);
  --color-border-focus:        var(--accent-500);

  /* Interactive / Brand */
  --color-accent-foreground:   white;
  --color-accent:              var(--accent-500);
  --color-accent-hover:        oklch(from var(--color-accent) calc(l + var(--hover-lightness-shift)) c h);
  --color-accent-active:       oklch(from var(--color-accent) calc(l - var(--active-lightness-shift)) c h);
  --color-accent-disabled:     var(--accent-200);
  --color-accent-muted:        var(--accent-100);
  --color-accent-subtle:       var(--accent-50);

  /* Text */
  --color-text-primary:        var(--neutral-900);
  --color-text-secondary:      var(--neutral-600);
  --color-text-tertiary:       var(--neutral-500);
  --color-text-disabled:       var(--neutral-400);
  --color-text-inverted:       var(--neutral-50);
  --color-text-accent:         var(--accent-600);
  --color-text-accent-hover:   oklch(from var(--color-text-accent) calc(l - var(--hover-lightness-shift)) c h);

  /* Interactive text */
  --color-link:                var(--accent-600);
  --color-link-hover:          oklch(from var(--color-link) calc(l + var(--hover-lightness-shift)) c h);
  --color-link-visited:        oklch(from var(--color-link) l c calc(h + 20));

  /* Status colors (maintaining same lightness for consistency) */
  --color-success:             oklch(from var(--seed) l c 140);  /* Green */
  --color-success-hover:       oklch(from var(--color-success) calc(l + var(--hover-lightness-shift)) c h);
  --color-warning:             oklch(from var(--seed) l c 80);   /* Yellow/Orange */
  --color-warning-hover:       oklch(from var(--color-warning) calc(l + var(--hover-lightness-shift)) c h);
  --color-error:               oklch(from var(--seed) l c 20);   /* Red */
  --color-error-hover:         oklch(from var(--color-error) calc(l + var(--hover-lightness-shift)) c h);

  /* GitHub Alert colors */
  --color-alert-note:          var(--color-accent);
  --color-alert-note-bg:       var(--color-accent-subtle);
  --color-alert-tip:           var(--color-success);
  --color-alert-tip-bg:        oklch(from var(--color-success) calc(l + 0.32) calc(c * 0.15) h);
  --color-alert-important:     var(--color-accent);
  --color-alert-important-bg:  var(--color-accent-subtle);
  --color-alert-warning:       var(--color-warning);
  --color-alert-warning-bg:    oklch(from var(--color-warning) calc(l + 0.32) calc(c * 0.15) h);
  --color-alert-caution:       var(--color-error);
  --color-alert-caution-bg:    oklch(from var(--color-error) calc(l + 0.32) calc(c * 0.15) h);

  /* Selection */
  --color-selection:           color-mix(in oklch, var(--accent-200) 60%, transparent);
  --color-selection-foreground:var(--color-text-primary);

  /* Focus indicators (WCAG 2.4.13 compliant) */
  --color-focus-ring:          var(--accent-500);
  --color-focus-ring-offset:   var(--color-background);

  /* Shadows with proper transparency */
  --color-shadow-sm:           oklch(from var(--color-text-primary) calc(l * 0.2) 0 h / 8%);
  --color-shadow-md:           oklch(from var(--color-text-primary) calc(l * 0.15) 0 h / 12%);
  --color-shadow-lg:           oklch(from var(--color-text-primary) calc(l * 0.1) 0 h / 16%);
}

/* ──────────────────────────
   3. Dark‑mode overrides
   ──────────────────────────*/
.dark {
  /* Flip the neutral scale */
  --color-background:          var(--neutral-900);
  --color-surface-primary:     var(--neutral-900);
  --color-surface-secondary:   var(--neutral-800);
  --color-surface-hover:       oklch(from var(--color-surface-primary) calc(l + var(--hover-lightness-shift)) c h);
  --color-surface-active:      oklch(from var(--color-surface-primary) calc(l + var(--active-lightness-shift)) c h);
  --color-border:              var(--neutral-700);
  --color-border-hover:        oklch(from var(--color-border) calc(l + var(--hover-lightness-shift)) c h);

  --color-text-primary:        var(--neutral-50);
  --color-text-secondary:      var(--neutral-400);
  --color-text-tertiary:       var(--neutral-500);
  --color-text-disabled:       var(--neutral-600);
  --color-text-inverted:       var(--neutral-900);
  --color-text-accent:         var(--accent-400);
  --color-text-accent-hover:   oklch(from var(--color-text-accent) calc(l + var(--hover-lightness-shift)) c h);

  --color-link:                var(--accent-400);
  --color-link-hover:          oklch(from var(--color-link) calc(l + var(--hover-lightness-shift)) c h);

  /* Adjust accent hover for dark mode */
  --color-accent-hover:        oklch(from var(--color-accent) calc(l - var(--hover-lightness-shift)) c h);

  /* Status colors adjusted for dark mode */
  --color-success-hover:       oklch(from var(--color-success) calc(l - var(--hover-lightness-shift)) c h);
  --color-warning-hover:       oklch(from var(--color-warning) calc(l - var(--hover-lightness-shift)) c h);
  --color-error-hover:         oklch(from var(--color-error) calc(l - var(--hover-lightness-shift)) c h);

  /* GitHub Alert colors for dark mode */
  --color-alert-note:          var(--color-accent);
  --color-alert-note-bg:       oklch(from var(--color-accent) calc(l - 0.28) calc(c * 0.2) h);
  --color-alert-tip:           var(--color-success);
  --color-alert-tip-bg:        oklch(from var(--color-success) calc(l - 0.28) calc(c * 0.2) h);
  --color-alert-important:     var(--color-accent);
  --color-alert-important-bg:  oklch(from var(--color-accent) calc(l - 0.28) calc(c * 0.2) h);
  --color-alert-warning:       var(--color-warning);
  --color-alert-warning-bg:    oklch(from var(--color-warning) calc(l - 0.28) calc(c * 0.2) h);
  --color-alert-caution:       var(--color-error);
  --color-alert-caution-bg:    oklch(from var(--color-error) calc(l - 0.28) calc(c * 0.2) h);

  --color-selection:           color-mix(in oklch, var(--accent-700) 40%, transparent);
  --color-selection-foreground:var(--color-text-primary);
}

/* ──────────────────────────
   4. Component examples
   (optional – remove if you only
    want the tokens themselves)
   ──────────────────────────*/
.button {
  background: var(--color-accent);
  color: var(--color-accent-foreground);
  border: 1px solid transparent;
  border-radius: 0.375rem;
  padding: 0.5rem 1rem;
  transition: all 120ms ease;
  outline: 2px solid transparent;
  outline-offset: 2px;
}

.button:hover {
  background: var(--color-accent-hover);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px var(--color-shadow-md);
}

.button:active {
  background: var(--color-accent-active);
  transform: translateY(0);
  box-shadow: 0 2px 4px var(--color-shadow-sm);
}

.button:focus-visible {
  outline-color: var(--color-focus-ring);
  outline-offset: 2px;
}

.button:disabled {
  background: var(--color-accent-disabled);
  color: var(--color-text-disabled);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* Button variants */
.button.secondary {
  background: var(--color-surface-secondary);
  color: var(--color-text-primary);
  border-color: var(--color-border);
}

.button.secondary:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
}

.button.ghost {
  background: transparent;
  color: var(--color-text-accent);
  border-color: transparent;
}

.button.ghost:hover {
  background: var(--color-accent-subtle);
  color: var(--color-text-accent-hover);
}

.card {
  background: var(--color-surface-primary);
  border: 1px solid var(--color-border);
  border-radius: 0.5rem;
  padding: 1rem;
  box-shadow: 0 2px 4px var(--color-shadow-sm);
  transition: all 120ms ease;
}

.card:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
  box-shadow: 0 4px 12px var(--color-shadow-md);
  transform: translateY(-2px);
}

/* Enhanced interactive states for better UX */
.card.interactive {
  cursor: pointer;
}

.card.interactive:active {
  background: var(--color-surface-active);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px var(--color-shadow-sm);
}

/* Focus states for accessibility */
.card:focus-visible {
  outline: 2px solid var(--color-focus-ring);
  outline-offset: 2px;
}
